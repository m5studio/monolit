{% load custom_filters %}

<div class="flat-card">
    <div class="flat-card__header">
        {% include "favorites/includes/add_to_favorites.html" with type="object_site" id=object.id %}
        <div class="flat-card__id">ID: {{ object.crm_id }}</div>
    </div>
    <div class="flat-card__img" style="background-image: url('{% spaceless %}
        {% if object.image_planning %}
            {{ object.image_planning.url }}
        {% else %}
            https://via.placeholder.com/386/FFFFFF/555555?text=No+Image
        {% endif %}
    {% endspaceless %}');">
        <a href="{{ object.get_absolute_url }}"></a>
    </div>
    <div class="flat-card__footer">
        <div class="flat-card__footer--top">
            <div class="flat-card__info">
                <div class="flat-card__label">{% if object.object.object_type %}{{ object.object.object_type }}{% endif %}</div>
                {% if object.object.name %}
                    <div class="flat-card__val flat-object-name">{{ object.object.name }}</div>
                {% endif %}
            </div>
        </div>
        <div class="flat-card__footer--middle">
            <div class="flat-card__info">
                <div class="flat-card__label">{{ object.display_name_card }}</div>
                {# <!-- <div class="flat-card__label">{% if object.rooms_qty %}{{ object.get_rooms_qty_display }}{% endif %}</div> --> #}
                <div class="flat-card__val">{% if object.site_area %}{{ object.site_area|floatformat:"-2" }} м<sup>2</sup>{% endif %}</div>
            </div>
            <div class="flat-card__info">
                <div class="flat-card__label">Этаж</div>
                <div class="flat-card__val">
                    {% if object.floor %}
                        <span class="flat-floor">{{ object.floor }}</span>
                    {% endif %}
                    {% if object.object_section.floor_last %}
                        <span class="last-floor">/{{ object.object_section.floor_last }}</span>
                    {% endif %}
                </div>
            </div>
            <div class="flat-card__info">
                <!-- TODO: Check Sections -->
                <div class="flat-card__label">{% if object.object_section.object_block.name %}Блок{% endif %}{% if object.object_section.object_block.name and object.object_section.number %} / {% endif %}{% if object.object_section.number %}Секция{% endif %}</div>
                <div class="flat-card__val flat-block-and-secton">{% if object.object_section.object_block.name %}{{ object.object_section.object_block.name }}{% endif %}{% if object.object_section.object_block.name and object.object_section.number %} / {% endif %}{% if object.object_section.number %}{{ object.object_section.number }}{% endif %}</div>
            </div>
        </div>
        <div class="flat-card__footer--bottom">
            <div class="flat-card__info">
                <div class="flat-card__price-total">
                    {% if object.price_total %}<span>{{ object.price_total|floatformat:"-2"|split_thousands }}</span><small> руб</small>{% endif %}
                </div>
                <div class="flat-card__price-per-meter">{% if object.price_per_square %}{{ object.price_per_square|floatformat:"-2"|split_thousands }} руб/м<sup>2</sup>{% endif %}</div>
            </div>
        </div>
    </div>
</div>
